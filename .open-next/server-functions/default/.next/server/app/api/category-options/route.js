(()=>{var e={};e.id=687,e.ids=[687],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7462:(e,t,o)=>{"use strict";o.a(e,async(e,r)=>{try{o.d(t,{db:()=>d});var n=o(97329),a=o(72094),s=o(64939),i=o(13723),c=e([s,a]);if([s,a]=c.then?(await c)():c,n.config({path:".env.local"}),!process.env.DATABASE_URL)throw Error("âŒ DATABASE_URL not set in .env.local");let p=new s.Pool({connectionString:process.env.DATABASE_URL,ssl:{rejectUnauthorized:!1}}),d=(0,a.fd)(p,{schema:i});r()}catch(e){r(e)}})},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13723:(e,t,o)=>{"use strict";o.r(t),o.d(t,{categories:()=>u,categoryOptionValues:()=>y,projectOptions:()=>m,projects:()=>g,teamMembers:()=>l,users:()=>d});var r=o(43402),n=o(79252),a=o(50033),s=o(29334),i=o(9253),c=o(14082),p=o(63431);let d=(0,r.cJ)("users",{uid:(0,n.yf)("uid",{length:255}).primaryKey(),userRole:(0,n.yf)("user_role",{length:50}).notNull()}),u=(0,r.cJ)("categories",{categoryId:(0,a.vX)("category_id").primaryKey(),category:(0,n.yf)("category",{length:100}).notNull()}),g=(0,r.cJ)("projects",{projectId:(0,a.vX)("project_id").primaryKey(),projectName:(0,n.yf)("project_name",{length:255}).notNull(),projectDescription:(0,s.Qq)("project_description"),projectLink:(0,n.yf)("project_link",{length:255}),createdAt:(0,i.vE)("created_at").defaultNow(),createdByUid:(0,n.yf)("created_by_uid",{length:255}),customDomain:(0,n.yf)("custom_domain",{length:255}),contactInstagram:(0,n.yf)("contact_instagram",{length:255}),contactLinkedIn:(0,n.yf)("contact_linkedin",{length:255}),contactEmail:(0,n.yf)("contact_email",{length:255}),contactWhatsApp:(0,n.yf)("contact_whatsapp",{length:255})},e=>({fk_createdBy:(0,c.mt)({columns:[e.createdByUid],foreignColumns:[d.uid]})})),l=(0,r.cJ)("team_members",{memberId:(0,a.vX)("member_id").primaryKey(),projectId:(0,p.nd)("project_id"),name:(0,n.yf)("name",{length:100}),linkedin:(0,n.yf)("linkedin",{length:255})},e=>({fk_projectId:(0,c.mt)({columns:[e.projectId],foreignColumns:[g.projectId]})})),y=(0,r.cJ)("category_option_values",{optionId:(0,a.vX)("option_id").primaryKey(),optionName:(0,n.yf)("option_name",{length:255}).notNull(),categoryId:(0,p.nd)("category_id")},e=>({fk_categoryId:(0,c.mt)({columns:[e.categoryId],foreignColumns:[u.categoryId]})})),m=(0,r.cJ)("project_options",{id:(0,a.vX)("id").primaryKey(),projectId:(0,p.nd)("project_id"),categoryId:(0,p.nd)("category_id"),optionId:(0,p.nd)("option_id")},e=>({fk_projectId:(0,c.mt)({columns:[e.projectId],foreignColumns:[g.projectId]}),fk_categoryId:(0,c.mt)({columns:[e.categoryId],foreignColumns:[u.categoryId]}),fk_optionId:(0,c.mt)({columns:[e.optionId],foreignColumns:[y.optionId]})}))},21820:e=>{"use strict";e.exports=require("os")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},55511:e=>{"use strict";e.exports=require("crypto")},61876:(e,t,o)=>{"use strict";o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{patchFetch:()=>p,routeModule:()=>d,serverHooks:()=>l,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>g});var n=o(96559),a=o(48088),s=o(37719),i=o(99904),c=e([i]);i=(c.then?(await c)():c)[0];let d=new n.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/category-options/route",pathname:"/api/category-options",filename:"route",bundlePath:"app/api/category-options/route"},resolvedPagePath:"/home/shadilrayyan/code/codecomapass/Project_Collab/app/api/category-options/route.ts",nextConfigOutput:"standalone",userland:i}),{workAsyncStorage:u,workUnitAsyncStorage:g,serverHooks:l}=d;function p(){return(0,s.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:g})}r()}catch(e){r(e)}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},78335:()=>{},96487:()=>{},99904:(e,t,o)=>{"use strict";o.a(e,async(e,r)=>{try{o.r(t),o.d(t,{DELETE:()=>g,GET:()=>p,POST:()=>d,PUT:()=>u});var n=o(32190),a=o(7462),s=o(13723),i=o(94634),c=e([a]);async function p(e){try{let{searchParams:t}=new URL(e.url),o=t.get("categoryName");if(!o)return n.NextResponse.json({message:"Category name is required."},{status:400});let r=await a.db.select().from(s.categories).where((0,i.eq)(s.categories.category,o)).execute();if(0===r.length||!r[0].categoryId)return n.NextResponse.json({message:"Category not found."},{status:404});let c=r[0].categoryId,p=await a.db.select({optionId:s.categoryOptionValues.optionId,optionName:s.categoryOptionValues.optionName}).from(s.categoryOptionValues).where((0,i.eq)(s.categoryOptionValues.categoryId,c)).execute();return n.NextResponse.json(p)}catch(e){return console.error("Error fetching category options:",e),n.NextResponse.json({message:"Failed to fetch category options."},{status:500})}}async function d(e){try{let{categoryName:t,optionName:o}=await e.json();if(!t||!o)return n.NextResponse.json({message:"Category name and option name are required."},{status:400});let r=await a.db.select().from(s.categories).where((0,i.eq)(s.categories.category,t)).execute();if(0===r.length||!r[0].categoryId)return n.NextResponse.json({message:"Category not found. Cannot add option."},{status:404});let c=r[0].categoryId,[p]=await a.db.insert(s.categoryOptionValues).values({optionName:o,categoryId:c}).returning();return n.NextResponse.json(p,{status:201})}catch(e){return console.error("Error adding category option:",e),n.NextResponse.json({message:"Failed to add category option."},{status:500})}}async function u(e){try{let{categoryName:t,optionId:o,optionName:r}=await e.json();if(!t||!o||!r)return n.NextResponse.json({message:"Category name, option ID, and new option name are required."},{status:400});let c=await a.db.select().from(s.categories).where((0,i.eq)(s.categories.category,t)).execute();if(0===c.length||!c[0].categoryId)return n.NextResponse.json({message:"Category not found. Cannot update option."},{status:404});let p=c[0].categoryId,[d]=await a.db.update(s.categoryOptionValues).set({optionName:r}).where((0,i.Uo)((0,i.eq)(s.categoryOptionValues.optionId,o),(0,i.eq)(s.categoryOptionValues.categoryId,p))).returning();if(!d)return n.NextResponse.json({message:"Option not found or does not belong to the specified category."},{status:404});return n.NextResponse.json(d)}catch(e){return console.error("Error updating category option:",e),n.NextResponse.json({message:"Failed to update category option."},{status:500})}}async function g(e){try{let{categoryName:t,optionId:o}=await e.json();if(!t||!o)return n.NextResponse.json({message:"Category name and option ID are required."},{status:400});let r=await a.db.select().from(s.categories).where((0,i.eq)(s.categories.category,t)).execute();if(0===r.length||!r[0].categoryId)return n.NextResponse.json({message:"Category not found. Cannot delete option."},{status:404});let c=r[0].categoryId,[p]=await a.db.delete(s.categoryOptionValues).where((0,i.Uo)((0,i.eq)(s.categoryOptionValues.optionId,o),(0,i.eq)(s.categoryOptionValues.categoryId,c))).returning();if(!p)return n.NextResponse.json({message:"Option not found or does not belong to the specified category."},{status:404});return n.NextResponse.json({message:"Option deleted successfully."})}catch(e){return console.error("Error deleting category option:",e),n.NextResponse.json({message:"Failed to delete category option."},{status:500})}}a=(c.then?(await c)():c)[0],r()}catch(e){r(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[719,996,190],()=>o(61876));module.exports=r})();