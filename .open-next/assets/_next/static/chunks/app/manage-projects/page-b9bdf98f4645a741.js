(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{2058:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var a=r(5155);r(2115);let o=e=>{let{numRows:t=5,numCols:r=3}=e;return(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg p-4 md:p-6 animate-pulse",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsx)("tr",{children:Array.from({length:r}).map((e,t)=>(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"})},t))})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.from({length:t}).map((e,t)=>(0,a.jsx)("tr",{children:Array.from({length:r}).map((e,t)=>(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})},t))},t))})]})})}},3299:(e,t,r)=>{Promise.resolve().then(r.bind(r,4722))},4722:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var a=r(5155),o=r(2115),s=r(2058);function l(){let[e,t]=(0,o.useState)([]),[r,l]=(0,o.useState)(!0),[c,n]=(0,o.useState)(null),[i,m]=(0,o.useState)(!1),[d,p]=(0,o.useState)(null),[u,h]=(0,o.useState)([]),[x,g]=(0,o.useState)(!0),[j,y]=(0,o.useState)(null);(0,o.useEffect)(()=>{b(),(async()=>{let e="cachedCategories",t=localStorage.getItem(e);if(t){let{data:e,timestamp:r}=JSON.parse(t);if(Date.now()-r<36e5){h(e),g(!1),console.log("Categories loaded from cache.");return}}try{let t=await fetch("/api/categories");if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();h(r),localStorage.setItem(e,JSON.stringify({data:r,timestamp:Date.now()}))}catch(e){y(e.message),console.error("Failed to fetch categories for form:",e)}finally{g(!1)}})()},[]);let b=async()=>{try{let e=await fetch("/api/projects");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();console.log("Fetched Projects Data:",r),t(r)}catch(e){n(e.message),console.error("Failed to fetch projects:",e)}finally{l(!1)}},f=e=>{console.log("Editing Project:",e);let t={};u.forEach(r=>{var a;let o=null==(a=e.categories)?void 0:a.find(e=>e.categoryName.toLowerCase()===r.categoryName.toLowerCase());t[r.categoryName]=(null==o?void 0:o.optionName.trim())||"","Year of Submission"===r.categoryName&&console.log("handleEditProject - Year of Submission - projectOption: ".concat(null==o?void 0:o.optionName,", trimmed: ").concat(null==o?void 0:o.optionName.trim(),", selectedCategoryOptions: ").concat(t[r.categoryName]))}),p({...e,createdAt:e.createdAt.split("T")[0],selectedCategoryOptions:t,customDomain:e.customDomain||""}),m(!0)},N=async r=>{if(window.confirm("Are you sure you want to delete this project?"))try{let a=await fetch("/api/projects",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({projectId:r})});if(!a.ok)throw Error("HTTP error! status: ".concat(a.status));t(e.filter(e=>e.projectId!==r))}catch(e){n(e.message),console.error("Failed to delete project:",e)}},w=async e=>{if(e.preventDefault(),!d)return;if(!d.members.some(e=>""!==e.name.trim()))return void alert("Please enter at least one member name.");let t=d.members.filter(e=>""!==e.name.trim()),r=Object.entries(d.selectedCategoryOptions).map(e=>{let[t,r]=e;return{categoryName:t,optionName:"Domain"===t&&"Other"===r?d.customDomain||"":r}}),a={projectId:d.projectId,projectName:d.projectName,projectDescription:d.projectDescription,projectLink:d.projectLink,createdAt:d.createdAt,members:t,projectCategoryOptions:r,customDomain:"Other"===d.selectedCategoryOptions.Domain?d.customDomain:void 0},o=d.projectId?"PUT":"POST";try{let e=await fetch("/api/projects",{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));b(),m(!1),p(null)}catch(e){n(e.message),console.error("Failed to save project:",e)}},v=e=>{let{name:t,value:r}=e.target;p(e=>{if(!e)return null;if(t.startsWith("category-")){let a=t.replace("category-","");return{...e,selectedCategoryOptions:{...e.selectedCategoryOptions,[a]:r.trim()},customDomain:"Domain"===a&&"Other"!==r?"":e.customDomain}}return"customDomain"===t?{...e,customDomain:r}:{...e,[t]:r}}),t.startsWith("category-")&&"Year of Submission"===t.replace("category-","")&&console.log("handleChange - Year of Submission - name: ".concat(t,", value: ").concat(r,", trimmed: ").concat(r.trim()))},k=(e,t)=>{let{name:r,value:a}=t.target;p(t=>{if(!t)return null;let o=[...t.members];return o[e]={...o[e],[r]:a},{...t,members:o}})},C=e=>{p(t=>{if(!t)return null;let r=t.members.filter((t,r)=>r!==e);return{...t,members:r}})};return r?(0,a.jsx)(s.A,{}):c?(0,a.jsxs)("div",{children:["Error: ",c]}):(0,a.jsx)("div",{className:"flex flex-col md:flex-row h-screen bg-gray-100 p-4 md:p-6",children:(0,a.jsxs)("div",{className:"flex-1 p-4 md:p-6 overflow-auto",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Manage Projects"}),(0,a.jsx)("button",{onClick:()=>{p({projectName:"",projectDescription:"",projectLink:"",createdAt:new Date().toISOString().split("T")[0],members:[{name:"",linkedin:""}],selectedCategoryOptions:{}}),m(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md mb-4 hover:bg-blue-700 w-full md:w-auto",children:"Add New Project"}),(0,a.jsx)("div",{className:"bg-white shadow-md rounded-lg p-4 md:p-6 overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.projectName}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:[null==(t=e.projectDescription)?void 0:t.substring(0,50),"..."]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("button",{onClick:()=>f(e),className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>e.projectId&&N(e.projectId),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},e.projectId)})})]})}),i&&d&&(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:d.projectId?"Edit Project":"Add Project"}),(0,a.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"projectName",className:"block text-sm font-medium text-gray-700",children:"Project Name"}),(0,a.jsx)("input",{type:"text",id:"projectName",name:"projectName",value:d.projectName,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"projectDescription",className:"block text-sm font-medium text-gray-700",children:"Project Description"}),(0,a.jsx)("textarea",{id:"projectDescription",name:"projectDescription",value:d.projectDescription,onChange:v,rows:4,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"projectLink",className:"block text-sm font-medium text-gray-700",children:"Project Link"}),(0,a.jsx)("input",{type:"url",id:"projectLink",name:"projectLink",value:d.projectLink,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"createdAt",className:"block text-sm font-medium text-gray-700",children:"Created At"}),(0,a.jsx)("input",{type:"date",id:"createdAt",name:"createdAt",value:d.createdAt,onChange:v,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),u.length>0&&u.map(e=>(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("label",{htmlFor:"category-".concat(e.categoryName),className:"block text-sm font-medium text-gray-700",children:e.categoryName}),(0,a.jsxs)("select",{id:"category-".concat(e.categoryName),name:"category-".concat(e.categoryName),required:!0,className:"w-full px-4 py-2 border rounded-lg",onChange:v,value:d.selectedCategoryOptions[e.categoryName]||"",children:[(0,a.jsxs)("option",{value:"",children:["Select a ",e.categoryName]}),e.options.map(e=>(0,a.jsx)("option",{value:e.optionName.trim(),children:e.optionName},e.optionId))]}),"Domain"===e.categoryName&&"Other"===d.selectedCategoryOptions.Domain&&(0,a.jsx)("input",{type:"text",name:"customDomain",required:!0,className:"mt-2 w-full px-4 py-2 border rounded-lg",placeholder:"Enter custom domain",onChange:v,value:d.customDomain||""})]},e.categoryId)),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-700 mt-6 mb-2",children:"Team Members"}),d.members.map((e,t)=>(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2 mb-2 items-end",children:[(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("label",{htmlFor:"member-name-".concat(t),className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,a.jsx)("input",{type:"text",id:"member-name-".concat(t),name:"name",value:e.name,onChange:e=>k(t,e),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2",required:!0})]}),(0,a.jsxs)("div",{className:"flex-1 w-full",children:[(0,a.jsx)("label",{htmlFor:"member-linkedin-".concat(t),className:"block text-sm font-medium text-gray-700",children:"LinkedIn"}),(0,a.jsx)("input",{type:"url",id:"member-linkedin-".concat(t),name:"linkedin",value:e.linkedin,onChange:e=>k(t,e),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>C(t),className:"bg-red-500 text-white px-3 py-2 rounded-md h-fit hover:bg-red-600 w-full sm:w-auto",children:"Remove"})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>{p(e=>e?{...e,members:[...e.members,{name:"",linkedin:""}]}:null)},className:"bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 w-full sm:w-auto",children:"Add Member"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-4 mt-6",children:[(0,a.jsx)("button",{type:"button",onClick:()=>m(!1),className:"bg-gray-300 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-400 w-full sm:w-auto",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 w-full sm:w-auto",children:"Save Project"})]})]})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(3299)),_N_E=e.O()}]);