(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{1138:(e,t,s)=>{"use strict";s.d(t,{j2:()=>d,kA:()=>c});var r=s(3915),o=s(3004),l=s(5317),a=s(858);let i={apiKey:"AIzaSyDG9VhP-IATL4km710pw2268S9TEV2G4HU",authDomain:"gecian-hub.firebaseapp.com",projectId:"gecian-hub",storageBucket:"gecian-hub.firebasestorage.app",messagingSenderId:"878972234931",appId:"1:878972234931:web:50308ca5adaf8c893a14c6",measurementId:s(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},n=0===(0,r.Dk)().length?(0,r.Wp)(i):(0,r.Dk)()[0],d=(0,o.xI)(n),c=(0,l.aU)(n);(0,a.c7)(n)},3900:(e,t,s)=>{Promise.resolve().then(s.bind(s,8007))},5695:(e,t,s)=>{"use strict";var r=s(8999);s.o(r,"useParams")&&s.d(t,{useParams:function(){return r.useParams}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},8007:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5155),o=s(2115),l=s(9490),a=s(5695);function i(){let[e,t]=(0,o.useState)(null),[s,i]=(0,o.useState)(!1),n=(0,a.useRouter)(),d=async()=>{i(!0),t(null);try{let e=await (0,l.G6)(),t=null==e?void 0:e.user;if(t){let e=await t.getIdToken();document.cookie="__session=".concat(e,"; path=/; "),console.log("User logged in:",t),console.log("token stored in cookie:",e)}(null==e?void 0:e.isAdmin)?n.push("/admin"):n.push("/")}catch(e){console.error("Failed to log in with Google:",e),t(e instanceof Error?e.message:"Failed to log in with Google")}finally{i(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-100 flex items-center justify-center p-4 relative overflow-hidden",children:[(0,r.jsx)("div",{className:"absolute top-20 left-10 w-32 h-32 bg-blue-200 rounded-full opacity-10 blur-3xl"}),(0,r.jsx)("div",{className:"absolute bottom-20 right-10 w-40 h-40 bg-blue-300 rounded-full opacity-15 blur-3xl"}),(0,r.jsx)("div",{className:"absolute top-1/2 left-1/4 w-24 h-24 bg-blue-400 rounded-full opacity-10 blur-2xl"}),(0,r.jsxs)("div",{className:"relative z-10 w-full max-w-md",children:[(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-blue-100 p-8 transform hover:scale-105 transition-all duration-300",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-blue-700 rounded-2xl flex items-center justify-center mx-auto mb-4 transform rotate-12",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,r.jsx)("h2",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"Welcome"}),(0,r.jsx)("p",{className:"text-blue-600 mt-2 font-medium",children:"Sign in to continue your journey"})]}),(0,r.jsxs)("button",{onClick:d,disabled:s,"aria-label":"Login with Google",type:"button",className:"group relative w-full p-2 bg-white border-2 border-blue-200 rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-blue-300 focus:ring-opacity-50 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:[(0,r.jsx)("div",{className:"flex items-center justify-center space-x-3",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"w-6 h-6 border-2 border-blue-300 border-t-blue-600 rounded-full animate-spin"}),(0,r.jsx)("span",{className:"text-lg font-semibold text-blue-700",children:"Signing you in..."})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"30",height:"30",viewBox:"0 0 48 48",children:[(0,r.jsx)("path",{fill:"#fbc02d",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12 s5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24s8.955,20,20,20 s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),(0,r.jsx)("path",{fill:"#e53935",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039 l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),(0,r.jsx)("path",{fill:"#4caf50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36 c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),(0,r.jsx)("path",{fill:"#1565c0",d:"M43.611,20.083L43.595,20L42,20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571 c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),(0,r.jsx)("span",{className:"text-lg font-semibold text-gray-700 group-hover:text-blue-700 transition-colors",children:"Continue with Google"})]})}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-50 to-blue-100 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"})]}),e&&(0,r.jsx)("div",{className:"mt-6 p-4 bg-red-50 border border-red-200 rounded-xl",children:(0,r.jsx)("p",{className:"text-red-600 text-sm text-center font-medium",children:e})})]}),(0,r.jsx)("p",{className:"text-center text-blue-500 text-sm mt-6 font-medium",children:"Secure authentication powered by Google"}),(0,r.jsx)("p",{className:"text-center text-orange-500 text-sm mt-6 font-medium",children:"Sign in with pkd skp mail"})]})]})}},9490:(e,t,s)=>{"use strict";s.d(t,{G6:()=>i,hg:()=>a});var r=s(3004),o=s(5317),l=s(1138);function a(e){return l.j2.onAuthStateChanged(e)}async function i(){let e=new r.HF;e.setCustomParameters({display:"popup"});try{var t;let s=(await (0,r.df)(l.j2,e)).user;if(!s||!s.email)throw Error("Google sign-in failed");if("codecompass2024@gmail.com"!==s.email&&!/^[a-zA-Z0-9]+@gecskp\.ac\.in$/.test(s.email))throw Error("Only GEC SKP emails are allowed");let a=(0,o.H9)(l.kA,"adminemail",s.email),i=await (0,o.x7)(a),n=i.exists()&&(null==(t=i.data())?void 0:t.role)==="admin";return{user:s,isAdmin:n}}catch(e){throw console.error("Error signing in with Google:",e),e}}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,835,441,684,358],()=>t(3900)),_N_E=e.O()}]);