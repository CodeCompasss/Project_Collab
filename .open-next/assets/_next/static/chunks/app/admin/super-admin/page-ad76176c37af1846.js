(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[772],{523:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>N});var s=t(5155),d=t(2115),i=t(5695),r=t(7550),l=t(1138),n=t(5317),o=t(2649),c=t(2596),m=t(9688);function u(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return(0,m.QP)((0,c.$)(a))}let x=o.bL,h=d.forwardRef((e,a)=>{let{className:t,...d}=e;return(0,s.jsx)(o.B8,{ref:a,className:u("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...d})});h.displayName=o.B8.displayName;let b=d.forwardRef((e,a)=>{let{className:t,...d}=e;return(0,s.jsx)(o.l9,{ref:a,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...d})});b.displayName=o.l9.displayName;let p=d.forwardRef((e,a)=>{let{className:t,...d}=e;return(0,s.jsx)(o.UC,{ref:a,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...d})});p.displayName=o.UC.displayName;let v=()=>{let[e,a]=(0,d.useState)(""),[t,i]=(0,d.useState)("admin"),[r,o]=(0,d.useState)(null),[c,m]=(0,d.useState)(!1),[u,x]=(0,d.useState)(!1),h=async()=>{o(null),m(!0);let s=l.j2.currentUser;if(!s){o("Must be logged in."),m(!1);return}let d=(0,n.H9)(l.kA,"adminemail",s.email),r=await (0,n.x7)(d);if(!r.exists()||"superadmin"!==r.data().role){o("Not authorized."),m(!1);return}try{let d=(0,n.H9)(l.kA,"adminemail",e);(await (0,n.x7)(d)).exists()&&await (0,n.kd)(d),await (0,n.BN)(d,{role:t,addedBy:s.email,addedAt:n.Dc.now(),isActive:!0}),o("Admin added successfully with role: ".concat(t)),a(""),i("admin"),x(!1)}catch(e){e instanceof Error?o("Error: "+e.message):o("An unknown error occurred.")}finally{m(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"email",placeholder:"Admin email",value:e,onChange:e=>a(e.target.value),className:"border p-2 w-full rounded mb-2"}),(0,s.jsxs)("select",{value:t,onChange:e=>i(e.target.value),className:"border p-2 w-full rounded mb-2",children:[(0,s.jsx)("option",{value:"admin",children:"Admin"}),(0,s.jsx)("option",{value:"superadmin",children:"Superadmin"})]}),u?(0,s.jsxs)("div",{className:"space-x-4",children:[(0,s.jsx)("button",{onClick:h,disabled:c,className:"bg-green-600 text-white px-4 py-2 rounded",children:"Confirm Add"}),(0,s.jsx)("button",{onClick:()=>x(!1),disabled:c,className:"bg-gray-300 px-4 py-2 rounded",children:"Cancel"})]}):(0,s.jsx)("button",{onClick:()=>x(!0),disabled:c||!e,className:"bg-blue-600 text-white px-4 py-2 rounded",children:"Add Admin"}),r&&(0,s.jsx)("p",{className:"mt-2 text-sm",children:r})]})},f=()=>{let[e,a]=(0,d.useState)([]);return(0,d.useEffect)(()=>{(async()=>{a((await (0,n.GG)((0,n.rJ)(l.kA,"adminemail"))).docs.map(e=>({id:e.id,role:e.data().role,addedBy:e.data().addedBy,addedAt:e.data().addedAt,isActive:e.data().isActive})))})()},[]),(0,s.jsx)("div",{children:e.map(e=>{var a;return(0,s.jsxs)("div",{className:"border rounded p-4 mb-2 shadow-sm bg-gray-50",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",e.id]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Role:"})," ",e.role]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Added By:"})," ",e.addedBy]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Added At:"})," ",null==(a=e.addedAt)?void 0:a.toDate().toLocaleString()]})]},e.id)})})},g=()=>{let[e,a]=(0,d.useState)(""),[t,i]=(0,d.useState)(null),[r,o]=(0,d.useState)(!1),c=async()=>{i(null);let t=l.j2.currentUser;if(!t)return void i("Must be logged in.");let s=(0,n.H9)(l.kA,"adminemail",t.email),d=await (0,n.x7)(s);if(!d.exists()||"superadmin"!==d.data().role)return void i("Not authorized.");try{let s=await (0,n.x7)((0,n.H9)(l.kA,"adminemail",e));if(!s.exists())return void i("Admin not found.");await (0,n.kd)((0,n.H9)(l.kA,"adminemail",e)),await (0,n.BN)((0,n.H9)(l.kA,"removedadmin",e),{email:e,removedBy:t.email,removedAt:n.Dc.now(),roleAtRemoval:s.data().role}),i("Admin removed."),a(""),o(!1)}catch(e){e instanceof Error?i("Error: "+e.message):i("An unknown error occurred.")}};return(0,s.jsxs)("div",{children:[(0,s.jsx)("input",{type:"email",placeholder:"Admin email to remove",value:e,onChange:e=>a(e.target.value),className:"border p-2 w-full rounded mb-2"}),r?(0,s.jsxs)("div",{className:"space-x-4",children:[(0,s.jsx)("button",{onClick:c,className:"bg-red-600 text-white px-4 py-2 rounded",children:"Yes, Remove"}),(0,s.jsx)("button",{onClick:()=>o(!1),className:"bg-gray-300 px-4 py-2 rounded",children:"Cancel"})]}):(0,s.jsx)("button",{onClick:()=>o(!0),className:"bg-red-600 text-white px-4 py-2 rounded",children:"Remove Admin"}),t&&(0,s.jsx)("p",{className:"mt-2 text-sm",children:t}),(0,s.jsx)(j,{})]})},j=()=>{let[e,a]=(0,d.useState)([]);return(0,d.useEffect)(()=>{(async()=>{a((await (0,n.GG)((0,n.rJ)(l.kA,"removedadmin"))).docs.map(e=>({id:e.id,email:e.data().email,removedBy:e.data().removedBy,roleAtRemoval:e.data().roleAtRemoval,removedAt:e.data().removedAt})))})()},[]),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Removed Admins"}),e.map(e=>{var a;return(0,s.jsxs)("div",{className:"border rounded p-4 mb-2 shadow-sm bg-red-50",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Email:"})," ",e.email]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Removed By:"})," ",e.removedBy]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Role:"})," ",e.roleAtRemoval]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Removed At:"})," ",null==(a=e.removedAt)?void 0:a.toDate().toLocaleString()]})]},e.id)})]})};function N(){let[e,a]=(0,d.useState)(null),[t,o]=(0,d.useState)(!0),c=(0,i.useRouter)();return((0,d.useEffect)(()=>{(async()=>{let e=l.j2.currentUser;if(!(null==e?void 0:e.email)){a(null),o(!1);return}let t=(0,n.H9)(l.kA,"adminemail",e.email),s=await (0,n.x7)(t);s.exists()?a(s.data().role):a(null),o(!1)})()},[]),t)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-blue-300 border-t-blue-600 rounded-full animate-spin mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-blue-700 font-medium animate-pulse",children:"Loading..."})]})}):"superadmin"!==e?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white",children:(0,s.jsx)("div",{className:"bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded shadow-sm text-center",children:(0,s.jsx)("p",{className:"font-semibold",children:"You are not authorized to access this page."})})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white p-8",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto bg-white shadow-xl rounded-2xl p-6 transition-all duration-300",children:[(0,s.jsxs)("button",{onClick:()=>c.push("/profile"),className:"flex items-center text-blue-600 hover:text-blue-800 transition-colors duration-200 mb-4",children:[(0,s.jsx)(r.A,{className:"w-5 h-5 mr-2"}),(0,s.jsx)("span",{className:"font-medium",children:"Back to Profile"})]}),(0,s.jsx)("h1",{className:"text-3xl font-extrabold text-blue-700 mb-6 text-center",children:"Super Admin Panel"}),(0,s.jsxs)(x,{defaultValue:"list",className:"w-full",children:[(0,s.jsxs)(h,{className:"flex justify-center space-x-2 bg-blue-100 p-1 rounded-lg mb-6",children:[(0,s.jsx)(b,{value:"list",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white text-blue-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-blue-200",children:"Admin List"}),(0,s.jsx)(b,{value:"add",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white text-blue-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-blue-200",children:"Add Admin"}),(0,s.jsx)(b,{value:"remove",className:"data-[state=active]:bg-blue-600 data-[state=active]:text-white text-blue-700 px-4 py-2 rounded-lg font-medium transition-all duration-200 hover:bg-blue-200",children:"Remove Admin"})]}),(0,s.jsx)(p,{value:"list",className:"animate-fadeIn",children:(0,s.jsx)(f,{})}),(0,s.jsx)(p,{value:"add",className:"animate-fadeIn",children:(0,s.jsx)(v,{})}),(0,s.jsx)(p,{value:"remove",className:"animate-fadeIn",children:(0,s.jsx)(g,{})})]})]})})}},1138:(e,a,t)=>{"use strict";t.d(a,{j2:()=>o,kA:()=>c});var s=t(3915),d=t(3004),i=t(5317),r=t(858);let l={apiKey:"AIzaSyDG9VhP-IATL4km710pw2268S9TEV2G4HU",authDomain:"gecian-hub.firebaseapp.com",projectId:"gecian-hub",storageBucket:"gecian-hub.firebasestorage.app",messagingSenderId:"878972234931",appId:"1:878972234931:web:50308ca5adaf8c893a14c6",measurementId:t(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},n=0===(0,s.Dk)().length?(0,s.Wp)(l):(0,s.Dk)()[0],o=(0,d.xI)(n),c=(0,i.aU)(n);(0,r.c7)(n)},6070:(e,a,t)=>{Promise.resolve().then(t.bind(t,523))}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,835,651,441,684,358],()=>a(6070)),_N_E=e.O()}]);