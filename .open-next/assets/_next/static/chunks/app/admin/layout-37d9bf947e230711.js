(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[581],{1138:(e,a,s)=>{"use strict";s.d(a,{j2:()=>o,kA:()=>c});var t=s(3915),r=s(3004),i=s(5317),l=s(858);let n={apiKey:"AIzaSyDG9VhP-IATL4km710pw2268S9TEV2G4HU",authDomain:"gecian-hub.firebaseapp.com",projectId:"gecian-hub",storageBucket:"gecian-hub.firebasestorage.app",messagingSenderId:"878972234931",appId:"1:878972234931:web:50308ca5adaf8c893a14c6",measurementId:s(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},u=0===(0,t.Dk)().length?(0,t.Wp)(n):(0,t.Dk)()[0],o=(0,r.xI)(u),c=(0,i.aU)(u);(0,l.c7)(u)},5695:(e,a,s)=>{"use strict";var t=s(8999);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},7143:(e,a,s)=>{Promise.resolve().then(s.bind(s,7998))},7998:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>o});var t=s(5155),r=s(2115),i=s(5695),l=s(9490),n=s(5317),u=s(1138);let o=e=>{let{children:a}=e,[s,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null),f=(0,i.useRouter)();return((0,r.useEffect)(()=>{(async()=>{let e=(0,l.hg)(async e=>{if(e){let s=(0,n.H9)(u.kA,"adminemail",e.email),t=await (0,n.x7)(s);if(t.exists()){var a;let e=null==(a=t.data())?void 0:a.role;"admin"===e||"superadmin"===e?(d(!0),h(e)):(d(!1),f.push("/auth/Login"))}else d(!1),f.push("/auth/Login")}else d(!1),f.push("/auth/Login");o(!1)});return()=>e()})()},[f]),s)?(0,t.jsx)("div",{children:"Loading..."}):c?(0,t.jsx)("div",{className:"flex flex-col h-screen",children:(0,t.jsx)("div",{className:"flex flex-1",children:(0,t.jsx)("main",{className:"flex-1 overflow-auto",children:(0,t.jsx)("div",{className:"flex-1 p-4 overflow-auto",children:a})})})}):null}},9490:(e,a,s)=>{"use strict";s.d(a,{G6:()=>n,hg:()=>l});var t=s(3004),r=s(5317),i=s(1138);function l(e){return i.j2.onAuthStateChanged(e)}async function n(){let e=new t.HF;e.setCustomParameters({display:"popup"});try{var a;let s=(await (0,t.df)(i.j2,e)).user;if(!s||!s.email)throw Error("Google sign-in failed");if("codecompass2024@gmail.com"!==s.email&&!/^[a-zA-Z0-9]+@gecskp\.ac\.in$/.test(s.email))throw Error("Only GEC SKP emails are allowed");let l=(0,r.H9)(i.kA,"adminemail",s.email),n=await (0,r.x7)(l),u=n.exists()&&(null==(a=n.data())?void 0:a.role)==="admin";return{user:s,isAdmin:u}}catch(e){throw console.error("Error signing in with Google:",e),e}}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,835,441,684,358],()=>a(7143)),_N_E=e.O()}]);